# 预期调度

> 原文:[https://www.geeksforgeeks.org/anticipatory-scheduling/](https://www.geeksforgeeks.org/anticipatory-scheduling/)

**预期调度**是硬盘中的一种**输入/输出**调度，通过预测近期的同步读操作来提高硬盘的吞吐量并提高其效率。

**历史:**
所有现有的磁盘调度算法都是寻道缩减算法，根据[先到先服务(FCFS)](https://www.geeksforgeeks.org/fcfs-scheduling-full-form/) 的原则跳到队列中等待的下一个请求，因为它不会使磁盘保持空闲。仍处于计算状态的前一个请求会在几毫秒后生成下一个请求，但此时，磁盘已经在执行另一个不可抢占的请求。因此，在不同操作之间切换时，seek 必须移动很多，这降低了传输速率和效率。

**工作:**
提高操作系统的性能是主要目标，这需要提高其正在访问的磁盘驱动器的性能，以便进行内存管理。为了提高性能，建议采用两种方法:

1.  **最小化寻道操作–**
    请求可以按寻道操作数量减少以及它们之间的距离减少的方式排序。这可以通过将所有附近的请求分组并一起执行来实现。

*   **Prioritizing read operations over write operations –**
    Write operations do not require particular operation to finish first and therefore can be pulled anytime, whereas read operations are generated one at a time and require more time than write operations. A read operation is not executed until current one has finished.

    然而，这两种方法在本质上是矛盾的，因为它们不能同时遵循。例如，如果我们试图通过一次将所有写操作分组来最小化寻道操作，那么我们的读操作将被延迟，因为它们在队列的后面。

    另一方面，如果我们试图区分读操作的优先级，那么最小化寻道操作是不可行的，因为在一个读操作完成之前不会产生另一个读操作，所以操作分组是不可能的，并且它将自动切换到任何请求的写操作。

    有时，它会导致磁盘的**欺骗性闲置**，这种情况下，一个读操作已经完成处理，寻道会自动切换到写操作，并知道没有写操作在等待，必须返回到切换发生时间隔内请求的另一个读操作。这降低了操作系统的效率，也延迟了同步读取操作。

    预期调度是“欺骗性闲置”问题的解决方案，它是一种在读取操作后暂停一小段时间(几毫秒)的方法，以预测可能在当前读取操作之后调度的任何同步读取操作，并立即为其提供服务。定时器关闭后，它切换到执行写操作。

    **应用:**

    1.  它用于 Apache 网络服务器，由于它显著提高了磁盘利用率和管理，吞吐量增加了 70%以上。
    2.  它还用于安德鲁文件系统基准测试，用于捕获软件开发中的文件服务器工作负载，并将扫描过程的执行时间减少 54%。

    **优势:**

    1.  它克服了“欺骗性闲置”的情况，大大提高了磁盘的性能。
    2.  它不需要预取操作，因为大多数情况下应用程序不知道未来的事件。此外，存储此类信息的开销成本会增加成本。这可以通过在切换寻道之前等待几分钟来克服。

    **缺点:**

    1.  等待时间必然会增加，与之相关的成本也会增加。在某些情况下，即使没有安排会增加延迟的连续读取操作，它也可能不会做出最佳决策并等待。
    2.  与之相关的实现问题包括计算请求的定位时间和廉价的超时机制。