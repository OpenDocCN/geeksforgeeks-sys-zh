# 开采后阶段介绍

> 原文:[https://www . geesforgeks . org/introduction-开采后阶段/](https://www.geeksforgeeks.org/introduction-to-post-exploitation-phase/)

**简介:-**
在本文中，我们将了解开采后阶段的不同阶段这是我们渗透测试流程的最后一个阶段。在这个阶段，我们进一步利用我们的目标，提升特权，甚至更深入内部网络。Meterpreter 使后期开发过程变得更加容易。Meterpreter 包含许多内置脚本。meterpreter 更大的特点是我们可以根据需要修改脚本。与主机操作系统建立连接后，现在是利用主机服务和网络进行安全测试的时候了。

### 后期开发阶段:

**获取态势感知-**
当危及主机系统时，您希望立即获取位于内部网络上的主机的相关数据，其中可能包含主机的主机名、接口、路由和服务。如果您熟悉主机操作系统，您可以利用这一点，列举更多有关主机系统和网络的信息。Windows 将是我们的共同目标之一，因为它是企业环境中最常用的操作系统。因为你们大多数人都熟悉 Windows，所以列举它可能很简单。我们的主要目标是列举网络，确定从我们受损的主机、接口以及服务是否可以到达其他主机。因为这对于检查网络和主机的安全性也很重要。如果网络不安全，攻击者可能会在我们的网络中进行未经授权的访问。

**升级权限-**
在此阶段，我们应该尝试升级权限，以获得对主机的完全访问权限。现在我们正处于安全程序中。升级权限的方法有很多，但在所有方法中，用 meterpreter 升级权限最快的方法是使用“getsystem”命令。它由许多技术组成。如果一种技术失败，它将尝试另一种技术，并将报告哪种技术成功提升了权限。我们可以使用命令 get system–h 来查看 meterpreter 使用什么类型的技术来提升权限。

1.  **绕过用户访问控制-**
    Windows Vista 及更高版本的操作系统具有用户访问控制的安全特性(UAC)。UAC 的目的是防止恶意软件在任何类型的恶意软件攻击期间危害系统。它通过向应用程序分配普通用户权限来实现这一点，即使用户具有管理员权限。然后，该应用程序必须得到管理员的批准，才能对您的计算机进行更改。UAC 可以根据您使用的操作系统轻松配置，您只需使用搜索框搜索关键字“UAC”。UAC 的默认级别是 3 级，当程序试图对您的计算机进行更改时会通知您。
2.  **升级 Linux 机器上的特权**
    我们倾向于谈论的方式只适用于基于 Windows 的软件包，因此你可能会好奇为什么我们倾向于不讨论升级 Linux 盒子上的特权。其基本原理是，有一种特定于单元的特权，可以根据内核版本来加强对基于 Linux 的包的利用，而我们的目标就是虐待内核版本。计量表中的 getsystem 无疑是一个较小的数字。

**维护访问:-**
目前，我们已经设法将权限提升到管理员级别或系统级别。到目前为止，我们已经设法保持稳定，然而，我们有一种趋势，还没有设法确定韧性。每当目标笔记本电脑重新启动时，我们连接到 meterpreter 会话的方法就会关闭，我们将失去访问权限。因此，人们可能会提出，为什么不通过不恰当地利用我们之前利用的漏洞来访问系统。我们将这样做，但是，这不是最简单的方法，因为超时应用程序得到更新，补丁区域单元得到应用，因此，漏洞区域单元得到修补。我们想要的是一个更好的感谢访问我们的系统，有面积单位更高的方法。所以我们倾向于不希望再次经历所有危及目标的努力。

**破解哈希以实现对替代服务的访问:-**
我们要提到的第二种方法是获取哈希，然后破解它们以获得对替代服务(如远程桌面、VNC 或 telnet)的访问。这种方法并不偷偷摸摸，因为管理员可能会注意到您创建的更改。考虑到几个用户区域单元允许访问显式服务。

**禁用防火墙:-**
禁用防火墙保护非常重要，以便在主机操作系统上执行各种任务。我们希望禁用防火墙的原因是我们不希望它中断连接。而我们必须执行开发后的方法。从我们的仪表外壳，我们会发出“外壳”命令来启动视窗电子通讯。从 Windows 的电子通讯，我们不得不发出后续的命令来炫耀防火墙。ex.netsh 防火墙设置 opmode 禁用

**查杀杀毒软件:-**
禁用杀毒软件的原因是我们不得不不想让它识别/删除我们的后门。我们希望保持不被发现，而进行我们的渗透需要看一看。我们将通过从电子通信中键入“net start”命令和“tasklist/svc”来检查内置防病毒程序，以确定防病毒程序运行的方法。
现在可以使用“taskkill”命令杀死一个选定的方法，或者让计量员为我们修改它。在 meterpreter 中，我们将实现一个名为“killav”的脚本，该脚本将机械地杀死护理杀毒中与 Associate 相关的所有进程。让我们通过错误地使用“cat”命令来阅读脚本的内容，然后是脚本的踪迹。

**泄露网络上具有等效密码的替代主机:-**
Windows 安全设计中的一个漏洞允许我们使用假释哈希登录到具有等效假释的等效网络上的替代主机。这样做的基本原理在 Linux 中可能是无法实现的，因为它对于每个用户的哈希来说都是一种新颖的盐，而在 Windows 中，我们往往没有额外的盐。
只要我们有一个区域单元无法破解 Windows 哈希并使用其假释哈希实现对网络上替代系统的访问，这个漏洞就会派上用场。在 Metasploit 中，我们有一个名为 psexec 的模块，它将传递凭证来利用系统。

这些都是我们在后开发阶段所遵循的一些阶段，时刻记住我们渗透到系统中去检查安全架构，发现主机和网络中的漏洞，因此永远不要运行危害主机的命令总是从主机的安全考虑来选择命令。