# 操作系统内存膨胀

> 原文:[https://www.geeksforgeeks.org/memory-ballooning-in-the-os/](https://www.geeksforgeeks.org/memory-ballooning-in-the-os/)

**概述:**
你可能研究过很多[内存管理系统 OS](https://www.geeksforgeeks.org/requirements-of-memory-management-system/) 利用内存，但是现在有一种特殊类型的内存管理被用来管理内存，这个系统被称为内存膨胀。在虚拟内存处理平台，如 VMWare、开源 KVM 等，可以看到它的频繁使用。这个系统最基本的图像可以通过想象有一个气球，充满空气，保存在一个长方体盒子里，就像你的操作系统看起来的一样。现在，想象有一个泵连接在气球的嘴上，它可以做得很大，但只能在一定程度上。该扩展区可以是以前虚拟机使用的无人认领的内存。

**通信:**
这些虚拟机之间的通信由虚拟机管理程序完成。

*   对于内存膨胀中的内存管理，主机服务器负责。主机服务器将回收虚拟机中不太繁忙的进程当前未使用的内存，并将这些内存分配给更急需的进程。
*   所以，为了理论理解，我们可以想象 32 千兆位的系统可以将其内存扩展到 64 千兆位。同样，这些数字本质上是理论性的。主机分配的内存可以少于或多于给定值。

**气球驱动程序:**
现在，我们将在内存气球中看到每个连接的客户机中的气球驱动程序是如何响应的。

*   每当机器需要一些内存进行回收时，虚拟机管理程序都会注册一个特定内存的回收请求，并且其他任何系统都不应获取该请求。
*   在内存不足的情况下，根据气球要求，可以在虚拟机之间进行重新安排，并通过共享或交换内存来满足气球内存要求。好的架构不应该让这种情况发生太多，因为它会耗尽太多的资源。

**虚拟机中的膨胀软件:**
像 VMWare 这样的软件要求您首先在虚拟机中安装膨胀软件，才能开始在 VMWare 中使用您的虚拟机。

*   气球的大小取决于虚拟机需要多少内存。根据需要，气球的大小可以增加，也可以减少，从而使内存气球在本质上更加动态。
*   为了确保性能保持在最高水平，您应该在所有主机上都有足够的大小，因为气球驱动程序会记住所有其他主机的活动内存使用情况。
*   该系统确保的一件事是，尽管进行了内存扩展，但当前使用的内存(即活动内存)不应超过主机内存。

```
    (active memory)<(host memory)
```

*   如果许多虚拟机同时被激活，那么通常的理解是这会突然增加虚拟机管理程序和整个生态系统的工作负载，但是使用内存膨胀的好处是不会降低性能。
*   当许多虚拟机加入时也是如此，它会在连接中产生峰值，因此这个问题也不会导致连接降级。

**优势:**
现在，我们来看看它的优势如下。

*   即使连接中的工作负载增加，膨胀也不会使系统降级。
*   实现该系统的最大优点是它将利用连接中可用的大部分内存。
*   它本质上是动态的，所以这项技术可以根据行业或公司的要求进行修改。

**缺点:**
作为内存，膨胀似乎是一个非常好的实现选项，但是它有一些缺点如下。

*   资源的过度利用是指气球占用大量内存，虚拟机管理程序无法将内存提供给需要内存的气球。
*   由于虚拟机管理程序使用内存交换和共享原则，如果多个处于非活动状态的虚拟机请求内存，则可能会影响系统性能。所以，我们应该使用互斥原则。