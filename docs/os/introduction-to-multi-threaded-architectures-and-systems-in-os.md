# 操作系统多线程架构和系统介绍

> 原文:[https://www . geesforgeks . org/多线程架构和操作系统简介/](https://www.geeksforgeeks.org/introduction-to-multi-threaded-architectures-and-systems-in-os/)

据我所知，[多线程架构](https://www.geeksforgeeks.org/multithreading-in-operating-system/)实际上是一种趋势，对于即将到来的微处理器设计来说是一种可靠且易于应用的解决方案，所以我研究了四篇关于这个主题的研究论文，只是为了熟悉这个主题所涉及的技术。

当今世界，超大规模集成电路(VLSI)技术发展迅速，允许处理器的设计者在单个芯片上吸收更多的功能，未来微处理器将很快能够在每个机器周期发出 12 条以上的指令。

现有的超标量和超大规模指令字(VLIW)微处理器利用多个功能单元，以便从单个控制流线程中利用指令级并行性。这类微处理器依赖于编译器或系统硬件，以便从程序中提取指令级并行性，然后在每个机器周期的多个功能单元上调度独立的指令。然而，当未来微处理器的发布率增加时，编译器或硬件将不得不通过分析更大的指令缓冲区(例如保留站入口)从程序中提取更多的指令级并行性。
即使对于少量的功能单元，也很难用单一的控制线程提取足够的并行性。

**单线程**排序机制的限制如下:

1.  为了利用指令级并行性，需要一起检查和发布来自单个指令流中不同基本构建块的独立指令。
2.  随着发出速率的增加，需要更大的指令缓冲区(例如，保留站入口)来包含几个基本的构建块，这些构建块将控制对不同分支条件的依赖性，但是它们的检查必须一起进行。
3.  此外，还需要具有分支预测的指令级分析执行，以跨基本块边界移动独立指令。当编译器试图用许多条件分支来流水线化循环时，这个问题尤其严重。
4.  在这里，系统的精度非常低。
5.  这里，与多线程体系结构相比，系统的速度相当低。

**多线程架构**的特点如下:

1.  在其常规形式中，多线程处理器由许多线程处理元件组成，这些元件通过单向环相互连接，这有助于以更好的方式执行系统。
2.  所有多线程处理元素都有自己的私有一级指令缓存，但它们将共享一级数据缓存和二级缓存。
3.  在多线程系统中，还存在一些共享寄存器文件，用于维护一些全局寄存器和一个锁寄存器。
4.  在运行期间，多个线程处理元件，每个都有自己的程序计数器和指令执行路径，然后可以很容易地同时从多个程序位置获取和执行指令。
5.  每个当前线程处理元素总是有一个私有内存缓冲区来缓存推测性存储，它也用于支持运行时数据依赖性检查。
6.  幸运的是，编译器静态地将程序的控制流图分成与控制流图的一部分一致的线程。一个线程对一组数据执行一轮计算，这些数据与其他并发线程没有或只有很少的依赖关系。编译器稍后将确定线程的粒度(它将直接影响性能)，这很难是一个循环的一次或几次迭代。
7.  程序的真正执行是从它的入口线程开始的。然后，这个入口线程可以将系统的处理转移到另一个线程处理单元上的后续线程。后继线程可以进一步将系统的处理转移到它自己的后继线程。这个过程将继续，直到所有线程处理元素都忙于一些适当的任务。
8.  当多线程在多线程处理器上执行时，按顺序的原始线程被称为头线程。然后从它派生的所有其他线程被称为后继线程。一旦头线程完成了它的计算，那么它将进一步退出并释放线程处理元素，然后它的(刚好)后续线程成为新的头线程。线程的完成和退出必须遵循原始的顺序执行顺序。
9.  在多线程系统(或模型)中，线程可以在有或没有控制推测的情况下，将系统的处理转移到它的后续线程之一。当系统的处理从头部转移到它的后继线程而没有控制推测时，执行分叉操作的线程必须确保新生成的后继线程的所有控制依赖性都已得到满足。
10.  然而，如果系统的处理从头线程转移到它的后继线程，带有控制推测，那么它必须稍后验证所有推测的控制依赖。如果任何推测的控制依赖关系不成立，线程必须发出命令来终止后续线程及其所有后续线程。
11.  一般来说，多线程体系结构将使用线程流水线执行模型，以加强并发线程之间的数据依赖性。与超标量处理器中的[指令流水线](https://www.geeksforgeeks.org/computer-organization-and-architecture-pipelining-set-1-execution-stages-and-throughput/)机制不同，在超标量处理器中，指令排序、数据相关性检查和转发由处理器硬件自动执行，多线程架构通过显式线程管理和通信指令来执行线程启动和数据转发。