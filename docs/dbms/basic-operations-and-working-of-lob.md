# LOB 的基本操作和工作

> 原文:[https://www . geesforgeks . org/basic-operations-and-work-of-lob/](https://www.geeksforgeeks.org/basic-operations-and-working-of-lob/)

本主题描述了在应用程序中使用 lob 时需要熟悉的 lob 的用法和语义。涵盖了使用 lob 的各种技术。

这里，持久性业务线假设您正在处理已经存在的表中的业务线，而创建具有业务线列的表的任务通常由数据库管理员执行。

*   您可以使用临时 lob 来存储临时数据。数据存储在临时表空间而不是常规表空间中。您应该在不再需要临时 lob 后释放它们。如果没有，则不会回收 LOB 在临时表空间中占用的空间。
*   您可以将临时 lob 插入表中。当您执行此操作时，将创建并存储业务线的永久副本。
*   您可以使用在 oracle.sql.BLOB 和 oracle.sql.CLOB 类中定义的静态方法 createTemporary 创建临时 LOB。您可以使用 freeTemporary 方法释放临时业务线。
*   您可以通过调用 is temporary()方法来测试业务线是否是临时的。如果 LOB 是通过调用 createTemporary 方法创建的，那么 isTemporary()方法返回 true，否则返回 false。
*   您可以通过调用 freeTemporary 方法来释放临时 LOB。在结束会话或呼叫之前，请释放所有临时 lob。

<u>**【LOB 列状态】**</u>
访问 LOB 列中的单元格时使用的技术因给定单元格的状态而异。业务线列中的单元格可以处于以下任何一种状态:

*   **空:**创建了表格单元格，但该单元格没有值或定位器。
*   **空:**单元格中存在一个带有定位器的 LOB 实例，但在 LOB 长度为零的情况下，它没有值。
*   **填充:**单元格中存在一个既有定位器又有值的业务线实例。

<u>**锁定包含 LOB 的行**</u>

锁定业务线的原因是您可以锁定包含业务线的行，以防止其他数据库用户在事务期间写入业务线。锁定包含业务线的行时，选择该行时指定 **FOR UPDATE** 子句，如果该行被锁定，则其他用户无法锁定或更新该业务线，直到您结束事务。

<u>**【打开和关闭业务线】**</u>
业务线应用编程接口包括使您能够显式打开和关闭业务线实例的操作。您可以轻松地打开或关闭任何类型的持久性业务线实例:BLOB、CLOB、NCLOB 或 BFILE。您可以打开业务线来实现以下一个或两个结果:

*   **以只读模式打开 LOB:**这确保了在您显式关闭 LOB 之前，LOB 不能在您的会话中更改。例如，您可以打开业务线，以确保在关键操作中使用业务线时，业务线不会被程序的其他部分更改。
*   **以读/写模式打开 LOB—仅持久的 **CLOB** 、 **NCLOB** 或 **BLOB** 实例:**以读写模式打开 LOB 会推迟 LOB 列上的任何索引维护，直到您关闭 LOB。只有在 LOB 列上有可扩展索引，并且不希望每次写入 LOB 时都维护数据库执行索引时，以读写模式打开 LOB 才有用。如果您在业务线打开时对其执行多个写操作，这种技术将提高应用程序的性能。
*   如果您打开一个业务线，则必须在会话的稍后某个时间点关闭该业务线。这是实现开放业务线的唯一要求。当业务线实例打开时，您可以对业务线执行任意多的操作，前提是在给定模式下允许这些操作。
    *   无效打开(int 模式)
    *   无效关闭()
    *   boolean isopen()
*   您应该将业务线操作包装在打开/关闭调用操作中，否则，对业务线的每次修改都会隐式打开和关闭业务线，从而触发域索引上的任何触发器。请注意，在这种情况下，一旦进行了业务线修改，业务线上的任何域索引都将更新。
*   当您将业务线操作包装在打开/关闭调用操作中时，不会为每个业务线修改触发触发器。相反，域索引上的触发器将在关闭调用操作时触发。
*   通过调用 open 或 open(int)方法打开 LOB 时。然后，您可以在没有任何触发器与业务线触发相关联的情况下读取或写入业务线。访问完业务线后，通过调用 close 方法关闭业务线。当您关闭业务线时，与该业务线关联的任何触发器都将触发。
*   您可以通过调用 **isOpen** 方法来检查 LOB 是打开还是关闭。每当通过调用 open(int)方法打开 LOB 时，参数的值必须是 **MODE_READONLY** 或 **MODE_READWRITE** ，如 oracle.sql.BLOB 和 oracle.sql.CLOB 类中所定义的。如果您使用**模式 _ 只读**打开业务线，那么任何写入业务线的尝试都会导致一个 SQL 异常。