# 共享锁和排他锁的区别

> 原文:[https://www . geesforgeks . org/共享锁和独占锁的区别/](https://www.geeksforgeeks.org/difference-between-shared-lock-and-exclusive-lock/)

确保事务中隔离属性的方法之一是要求以互斥的方式访问数据项。这意味着，当一个事务访问一个数据项时，没有其他事务可以修改该数据项。因此，用于实现需求的最常见方法是，仅当事务当前持有数据项的**锁时，才允许该事务访问该数据项。**

因此，需要锁定操作来确保事务的隔离。

**1。[共享锁](https://www.geeksforgeeks.org/lock-based-concurrency-control-protocol-in-dbms/) :**

*   共享锁也称为读锁，仅用于读取数据项。
*   共享锁支持读取完整性。它们确保记录不会在只读请求期间被更新。
*   共享锁也可以用来防止任何类型的记录更新。
*   它由锁表示
*   使用锁定指令请求锁定。

对于**示例**，考虑这样一种情况:最初 A=100，有两个事务正在读取 A。如果其中一个事务想要更新 A，在这种情况下，另一个事务将读取错误的值。但是，共享锁会阻止它更新，直到它完成读取。

**2。排他锁(X) :**

*   使用排他锁，数据项既可以被读取，也可以被写入。也称为写锁。
*   排他锁防止任何其他锁在对象上获得任何类型的锁。
*   它们一次只能由一个事务拥有。
*   它被表示为锁定-X。
*   使用锁定指令请求锁定。

对于**示例**，考虑一个案例，当一个交易需要从 A 中扣除 50 时，初始 A=100，我们可以通过对其放置 X 锁来允许这个交易。因此，当任何其他事务想要读取或写入时，排他锁会阻止它。

**锁定兼容性矩阵:**

![](img/67dd79872b0c87c0347e047a9d4b79f4.png)

锁的兼容性矩阵

*   如果事务 T1 持有数据项 A 中的共享锁，那么控制管理器可以将共享锁授予事务 T2，因为兼容性为真，但是它不能授予排他锁，因为兼容性为假。
*   简单地说，如果事务 T1 正在读取数据项 A，那么同一数据项 A 可以被另一个事务 T2 读取，但是不能被另一个事务写入。
*   类似地，如果在某个事务中对数据项持有排他锁(即用于读和写操作的锁)，则没有其他事务可以获得共享锁或排他锁，因为兼容性函数表示为假。

**共享锁和排他锁的区别:**

<center>

| 没有。 | 共享锁 | 互锁 |
| 1. | 锁定模式是只读操作。 | 锁定模式是读操作和写操作。 |
| 2. | 共享锁可以放在没有独占锁的对象上。 | 排他锁只能放在没有任何其他类型锁的对象上。 |
| 3. | 防止其他人更新数据。 | 防止其他人读取或更新数据。 |
| 4. | 当事务想要读取没有排他锁的项目时发出。 | 当交易需要更新未锁定的项目时发出。 |
| 5. | 任何数量的事务都可以持有一个项目的共享锁。 | 排他锁只能由一个事务持有。 |
| 6. | 使用锁定指令请求锁定。 | 使用锁 X 指令请求锁 X。 |

</center>