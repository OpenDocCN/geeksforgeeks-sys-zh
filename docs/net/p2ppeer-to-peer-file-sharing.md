# P2P(对等)文件共享

> 原文:[https://www.geeksforgeeks.org/p2ppeer-to-peer-file-sharing/](https://www.geeksforgeeks.org/p2ppeer-to-peer-file-sharing/)

**简介**
在计算机网络中，P2P 是一种文件共享技术，允许用户主要访问视频、音乐、电子书、游戏等多媒体文件。该网络中的个人用户被称为**对等用户**。对等体通过建立 TCP 或 UDP 连接向其他对等体请求文件。

**P2P 如何工作(概述)**
对等网络允许计算机硬件和软件在不需要服务器的情况下进行通信。与客户端-服务器架构不同，在 P2P 架构中没有用于处理请求的中央服务器。对等体彼此直接交互，而不需要中央服务器。

现在，当一个对等体发出请求时，可能有多个对等体拥有该请求对象的副本。现在的问题是如何获得所有这些对等体的 IP 地址。这是由 P2P 系统支持的底层架构决定的。通过这些方法中的一种，客户端对等体可以了解所有具有所请求的对象/文件的对等体，并且文件传输直接在这两个对等体之间进行。

**这样的建筑有三个:**

1.  集中目录
2.  查询泛滥
3.  利用异质性

**1。集中目录**

*   它有点类似于客户机-服务器架构，因为它维护一个巨大的中央服务器来提供目录服务。
*   所有的对等体都将它们的 IP 地址和它们正在共享的文件通知给这个中央服务器。
*   服务器定期查询对等点，以确定对等点是否仍然连接。
*   所以基本上这个服务器维护着一个巨大的数据库，关于哪个文件存在于哪个 IP 地址。

**工作**T2】

*   现在，每当请求对等体进来时，它都会将其查询发送到服务器。
*   由于服务器拥有其对等体的所有信息，因此它将拥有所请求文件的所有对等体的 IP 地址返回给对等体。
*   现在文件传输在这两个对等点之间进行。

第一个使用这种方法的系统是 **Napster** ，用于 Mp3 分发。

![](img/ece5aca202554a70d7b13f76163aa501.png)

这种架构的主要问题是存在单点故障。如果服务器崩溃，整个 P2P 网络都会崩溃。此外，由于所有的处理都是由单个服务器完成的，因此必须维护和定期更新大量的数据库。

**2。查询洪水**

*   与集中式方法不同，这种方法使用分布式系统。
*   在这种情况下，对等点应该连接到覆盖网络。这意味着如果从一个对等点到另一个对等点存在连接/路径，则它是该覆盖网络的一部分。
*   在这个覆盖网络中，对等体被称为节点，对等体之间的连接被称为节点之间的边，从而产生了类似图形的结构。

**工作**T2】

*   现在，当一个对等体请求某个文件时，该请求被发送到其所有相邻节点，即连接到该节点的所有节点。如果这些节点没有所需的文件，它们会将查询传递给邻居，以此类推。这被称为查询泛滥。
*   当找到具有所请求文件的对等方时(称为查询命中)，查询泛洪停止，并将文件名和文件大小发送回客户端，从而遵循相反的路径。
*   如果有多个查询命中，客户端从这些对等体中选择一个。

**Gnutella** 是第一个去中心化的对等网络。

![](img/41ee938fababf738645d85c66639b873.png)

这种方法也有一些缺点，例如，除非找到匹配项，否则查询必须发送到所有相邻的对等点。这增加了网络中的流量。

**3。利用异质性**

*   这种 P2P 体系结构利用了上述两种系统。
*   它类似于 Gnutella 这样的分布式系统，因为没有用于查询处理的中央服务器。
*   但与 Gnutella 不同的是，它并没有平等对待所有同行。具有更高带宽和网络连接的对等体具有更高的优先级，被称为**群领导/超节点**。其余的对等节点被分配给这些超级节点。
*   这些超级节点是相互连接的，这些超级节点下的对等节点会通知各自的负责人它们的连接性、IP 地址和可供共享的文件。

**KaZaA** 技术就是这样一个利用 Napster 和 Gnutella 的例子。
因此，各个小组的领导者和他们的孩子来自一个类似纳普斯特的结构。然后，这些集团领导人相互连接，形成类似 Gnutella 的结构。

**工作**T2】

*   这种结构可以通过两种方式处理查询。
*   第一个是超级节点可以联系其他超级节点，并将它们的数据库与自己的数据库合并。因此，该超级节点现在具有大量对等体的信息。
*   另一种方法是，当查询进来时，它被转发到相邻的超级节点，直到找到匹配，就像在 Gnutella 中一样。因此，查询泛滥存在，但范围有限，因为每个超级节点都有许多子节点。因此，这样的系统利用了对等体的异构性，将它们中的一些指定为组领导/超节点，而将其他的指定为它们的子对等体。

![](img/9115252e1701d55b4674c731076faa8a.png)

参考文献-计算机网络:一种自上而下的方法

本文由**阿鲁什·达米亚**供稿。如果你喜欢 GeeksforGeeks 并想投稿，你也可以使用[write.geeksforgeeks.org](https://write.geeksforgeeks.org)写一篇文章或者把你的文章邮寄到 review-team@geeksforgeeks.org。看到你的文章出现在极客博客主页上，帮助其他极客。

如果你发现任何不正确的地方，或者你想分享更多关于上面讨论的话题的信息，请写评论。