# 【DHCP 服务器如何动态分配 IP 地址给主机？

> 原文:[https://www . geesforgeks . org/how-DHCP-server-dynamic-assignments-IP-address-to-a-host/](https://www.geeksforgeeks.org/how-dhcp-server-dynamically-assigns-ip-address-to-a-host/)

DHCP 是动态主机配置协议的缩写。它是主机用来获取网络设置信息的应用层协议。DHCP 由 DHCP 服务器控制，**动态分配**网络配置参数，如 IP 地址、子网掩码和网关地址。

**什么是动态主机配置协议？**

*   动态–自动
*   主机–连接到网络的任何计算机
*   配置–配置主机意味着向主机提供网络信息(IP 地址、子网掩码、网关地址)
*   协议–一套规则

综上所述，DHCP 服务器动态配置网络中的主机。

**手动配置主机的缺点:**当主机连接到网络时，可以手动(即由网络管理员或 DHCP 服务器)配置主机。在家庭网络的情况下，手动配置相当容易。而在大型网络中，网络管理员可能会面临许多问题。
还有，手动配置容易出错。假设网络管理员可能分配了一个已经分配的 IP 地址。因此，给网络上的管理员和邻居都带来了困难。

所以，DHCP 服务器的使用来了。在讨论 DHCP 服务器如何工作之前，让我们先了解一下 DHCP 实体。

**使用 DHCP 配置主机:**
要配置主机，我们需要以下条件:

*   **租用的 IP 地址**–持续特定时间的主机的 IP 地址，持续几个小时、几天或几周。
*   **子网掩码**–主机可以知道自己在哪个网络上。
*   **网关地址**–网关是将用户连接到互联网的互联网服务提供商。网关地址让主机知道网关连接到互联网的位置。

**DHCP 实体**

*   **DHCP 服务器:**自动提供租用的网络信息(IP 地址、子网掩码、网关地址)。一旦持续时间到期，该网络信息可以分配给另一台机器。它还维护存储可用 IP 地址的数据存储。
*   **DHCP 客户端:** 任何向网络请求分配 IP 地址的节点都被视为 DHCP 客户端。
*   **DHCP 中继代理:**如果我们只有一台 DHCP 服务器用于多个局域网，那么在每个网络中出现的这个代理会将 DHCP 请求转发给 DHCP 服务器。因此，使用 DHCP 中继代理，我们可以用一台服务器配置多个局域网。

【DHCP 服务器如何为主机分配 IP 地址？

1.  **DHCPDISCOVER:** 当一个新节点连接到网络时，它会将包含源地址为 0.0.0.0 的 DHCPDISCOVER 消息广播给网络上的每个节点，包括服务器。DHCP 服务器收到消息后，会将 DHCPOFFER 消息返回给请求的主机，该消息包含服务器地址和节点的新 IP 地址。

2.  **DHCPOFFER:** 如果网络上有多台服务器，主机会收到多条 DHCPOFFER 消息。由主机来选择特定的消息。

3.  **DHCPREQUEST:** 被请求主机在收到 offer 消息后，再次在网络上广播 DHCPREQUEST 消息，其 offer 消息被主机接受的服务器的地址。与主机发送的服务器地址相关的服务器检查要分配给节点的地址在数据存储器中是否可用。

4.  **DHCPACK:** 如果分配了地址，它会将存储中的 IP 地址标记为不可用，以确保一致性。现在，服务器向请求的主机发送包含网络信息(IP 地址、子网掩码、网关地址)的 DHCPACK 数据包。在这种情况下，如果该地址同时被分配给另一台机器，则服务器向被请求的主机发送数据包 DHCPNAK，指示该 IP 地址被分配给某台其他机器。

5.  **DHCPRELEASE:** 最后，如果主机想移动到另一个网络或者已经完成工作，它会向服务器发送 DHCPRELEASE 数据包，表示它想断开连接。然后，服务器将该 IP 地址标记为在存储中可用，以便可以将其分配给其他机器。

**参考:**
关于 DHCP 协议的参考，[点击这里](https://www.youtube.com/watch?v=k4t-NJrKLgM)

本文由**婆罗门赛**供稿。如果你喜欢 GeeksforGeeks 并想投稿，你也可以使用[write.geeksforgeeks.org](https://write.geeksforgeeks.org)写一篇文章或者把你的文章邮寄到 review-team@geeksforgeeks.org。看到你的文章出现在极客博客主页上，帮助其他极客。

如果你发现任何不正确的地方，或者你想分享更多关于上面讨论的话题的信息，请写评论。