# 无状态与有状态包过滤防火墙

> 原文:[https://www . geesforgeks . org/无状态-vs-有状态-包过滤-防火墙/](https://www.geeksforgeeks.org/stateless-vs-stateful-packet-filtering-firewalls/)

包过滤防火墙检查源和目的 IP 地址、协议([用户数据报协议](https://www.geeksforgeeks.org/user-datagram-protocol-udp/))[(UDP)](https://www.geeksforgeeks.org/user-datagram-protocol-udp/)和[传输控制协议(TCP)](https://www.geeksforgeeks.org/tcp-ip-model/) )以及端口地址。如果两个 IP 地址都匹配，则认为该数据包是安全的并经过验证。

包过滤防火墙分为*两个*类别:

1.  **无状态包过滤防火墙**
2.  **状态包过滤防火墙**

在进入无状态和有状态防火墙之前，让我们了解两个术语的含义:

1.  *状态*
2.  *上下文*

这些解释如下。

**1。State–**
简单来说，state 指的是进程的最后已知或当前状态，而管理 state 指的是跟踪进程。我们以基于 TCP 的通信为例。在 TCP 中，九个可分配控制位中的四个位用于控制连接的状态。四个控制位为- *1。SYN*T5【2】。ACK 3。FIN 和 4。RST 。

*   首先，客户端使用三次握手启动连接。TCP 堆栈设置 SYN 标志来指示新连接的开始。
*   然后，当防火墙已经检查了来自双方的数据包，并且它将其内部连接状态提升到*已建立*时，连接接收到服务器的 SYN+ACK。但是，当防火墙看到 RST 或 FIN+ACK 数据包时，它会将连接状态标记为删除。此连接的任何未来数据包都将被拒绝。

**2。上下文-**
连接的上下文由与数据包相关的元数据组成。它包括源和目标的 IP 地址和端口号。它还包括数据包长度、与重组和分段相关的第 3 层信息、第 4 层的 TCP 序列号、标志等。

**状态防火墙:**
该防火墙位于[开放系统互连(OSI)模型](https://www.geeksforgeeks.org/layers-of-osi-model/)的第 3 层和第 4 层。顾名思义，有状态防火墙总是跟踪网络连接的状态。一旦特定类型的流量被有状态防火墙批准，它就会被添加到状态表中。状态表条目是为根据配置的安全策略允许通过防火墙通信的 TCP(传输控制协议)流或 UDP(用户数据报协议)数据报创建的。如果在指定的时间内没有看到流量(取决于实现)，连接将从状态表中删除。

**优点-**

1.  有状态防火墙非常擅长检测伪造的消息或未经授权的访问。
2.  这些防火墙具有强大的内存来保留网络连接的关键方面。
3.  它们是智能系统。他们根据过去和现在的结果做出未来的过滤决定。这意味着一旦遇到特定的网络攻击，它可以在未来自动停止，而不需要更新。
4.  这些防火墙不需要打开很多端口就能正常通信。
5.  状态防火墙提供了广泛的日志记录功能和更强的攻击缓解能力。

**Cons-**

1.  有状态防火墙容易受到[分布式拒绝服务(DDoS)攻击](https://www.geeksforgeeks.org/denial-of-service-ddos-attack/)。
2.  这些防火墙必须用最新的软件版本进行更新，否则，漏洞可能会让黑客控制防火墙。
3.  他们可能会被愚弄而允许有害的网络连接，而这可以通过一个简单的动作来实现，比如查看网页。
4.  这些防火墙可能对中间人(MITM)攻击更敏感，中间人攻击涉及攻击者拦截两个人之间的通信，以监视流量或对其进行更改。

**无状态防火墙:**
它也被称为[访问控制列表(ACL)](https://www.geeksforgeeks.org/access-lists-acl/) ，不存储连接状态的信息。无状态 ACL 适用于网络层和物理层，有时也适用于传输层，用于找出源端口号和目的端口号。当发送方发送数据包并通过防火墙过滤时，设备会检查是否与防火墙中配置的任何 ACL 规则匹配，然后相应地丢弃或拒绝数据包。

**优点-**

1.  无状态防火墙没有状态防火墙考虑的那么多，它们通常被认为不太严格。这就是为什么他们很快。
2.  因为它没有涉及那么多细节，所以在交通拥挤的情况下表现得相当好。
3.  它们通常比有状态防火墙便宜。

**Cons-**

1.  无状态防火墙无法分析所有网络流量(或数据包)，因此无法识别流量类型。这导致它比有状态防火墙更不安全。
2.  在许多情况下，这些防火墙可能需要由熟悉影响网络的流量和攻击类型的人仔细配置。这可能需要额外的时间和精力来执行。

**无状态防火墙和有状态防火墙的区别:**

<figure class="table">

|   | 无状态包过滤防火墙 | 状态包过滤防火墙 |
| --- | --- | --- |
| 1. | 无状态防火墙旨在基于静态信息(如源和目标)保护网络。 | 状态防火墙根据连接的完整上下文过滤数据包。 |
| 2. | 它使用一些预定义的包过滤规则，根据这些规则来判断数据包，如果它符合预定义的规则，那么它被认为是“安全的”并被允许通过。如果不满足条件，数据包将被视为“未识别”或“恶意”数据包，并将被阻止。 | 它使用状态表的概念，存储合法连接的状态。无状态防火墙过滤器仅基于数据包中的报头信息，但有状态防火墙过滤器检查数据包中的所有内容、数据的特征及其通信通道。 |
| 3. | 不如无状态防火墙安全。 | 状态防火墙更安全。 |
| 4. | 便宜还是划算。 | 与无状态防火墙相比，价格昂贵 |
| 5. | 比有状态包过滤防火墙更快。 | 与无状态防火墙相比，速度较慢。 |
| 6. | 对于小型企业来说，无状态防火墙可能是更好的选择，因为他们面临的威胁更少，手头的预算也有限。 | 对于较大的企业来说，有状态防火墙将是一个更聪明的选择，因为它们有更大的传出流量，需要监控和足够的资金来支付。状态防火墙提供动态包过滤，因此它们可以提供厚的安全层来减轻攻击。 |

**注意:**防火墙可以是有状态的，也可以是无状态的，但不能两者都有。

</figure>