# EIGRP 成本计算

> 原文:[https://www.geeksforgeeks.org/eigrp-cost-calculation/](https://www.geeksforgeeks.org/eigrp-cost-calculation/)

先决条件–[EIGRP](https://www.geeksforgeeks.org/computer-network-features-enhanced-interior-gateway-routing-protocol-eigrp/)
As 增强型内部网关路由协议(EIGRP)是一种混合矢量路由协议，因为它包含距离矢量路由协议和链路状态路由协议的特性。这是一个网络层协议，使用 88 号协议。

**成本计算–**
复合矩阵用于计算成本，也用于邻居发现目的。它有值:
K1(带宽)- 1
K2(负载)- 0
K3(延迟)-1
K4(可靠性)- 0
K5(MTU)-0
因为只使用带宽和延迟来计算成本。成本计算公式为:
EIGRP Metric =**256 *(K1 *带宽)+(K2 *带宽)/(256-负载)+K3 *延迟)*(K5/(可靠性+ K4)))**

由于 K1 和 K3 的值被设置为 1，而 K2、K4 和 K5 被设置为 0。因此，公式变为:
**度量= 256*(带宽+所有延迟之和)**
其中带宽= (10^7/least 带宽)和
延迟=(所有延迟之和/10)

带宽是源和目的地之间的最低带宽，延迟是沿着源和目的地之间的路径的累积接口延迟。

一些重要术语包括:

*   **通告或报告的距离:**是相邻路由器给出的到达目的网络的距离。
*   **可行距离:**网络所有路径中的最佳度量。计算方法是将邻居通告的通告/报告距离与当前路由器计算的到达邻居的成本相加。
*   **后继路径:**它是到达任何特定目的网络的(最低)最佳路径。这些都存储在路由表中。
*   **可行后继:**定义为通告距离小于当前后继可行距离的路径。这些存储在拓扑表中。
*   **路由表:**它包含到远程网络的当前后继路由。它存储在内存中。最佳路由从拓扑表复制到路由表中。
*   **邻居表:**包含 EIGRP 邻居的信息，如 IP 地址、接口、队列数、重传间隔等。
*   **拓扑表:**该表包含相邻路由器通告的所有目的网络。它包含后继路由和可行后继路由，但只有后继路由被复制到路由表中。如果后继路由失效，则从拓扑表中选择可行的后继路由到达该网络。

**可靠传输协议–**
EIGRP 使用 RTP 在相邻的 EIGRP 路由器之间交换 EIGRP 消息。EIGRP 在 224.0.0.10 发送多播消息。建立并维护哪些邻居已确认消息的列表。在这种情况下，如果邻居没有确认消息，那么消息将被单播到邻居路由器 16 次。如果即使在单播消息之后也没有回复，则邻居被宣布死亡。这就是所谓的可靠多播。

**扩散更新算法(DUAL)–**
DUAL 维护关于路径的多个度量，包括后继、可行距离、可行后继、报告距离和可行条件。DUAL 用于通过连续计算路由来防止路由环路。它会找到从路由器到目的网络的较短的无环路路径。DUAL 中有两种情况:

1.  当后继路径中断时，路由器将搜索可行的后继路径。如果存在可行的后继，则使用它
2.  当没有可行的后继，但有邻居通告目的地时，必须进行重新计算(查询消息是多播的)。这是确定新接班人的过程。重新计算路由所需的时间会影响收敛时间。