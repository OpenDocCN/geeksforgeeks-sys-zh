# GCP 内外部转发规则

> 原文:[https://www . geesforgeks . org/inter-external-forwarding-rule-in-GCP/](https://www.geeksforgeeks.org/internal-external-forwarding-rule-in-gcp/)

在云计算中，特别是针对谷歌云平台，设置了一个**转发规则**，允许传入流量，并将其从特定范围内的单个端口定向到谷歌云平台上用户虚拟机上的特定端口。可以使用防火墙规则在公共 IP 地址上打开该范围的端口。转发规则资源指定如果数据包与给定的[IP 地址、IP 协议、端口范围]元组匹配，则将数据包转发到哪个目标虚拟机池。

这些**转发规则**的主要应用是在 GCP 的负载平衡器中，该负载平衡器负责分配您的网络流量，并根据您的网络可用性自动缩放流量。现在，这些转发规则中的每一个都指一个 IP 地址和一个或多个端口，负载平衡器在这些端口上接受流量。使用一些谷歌云负载平衡器，您可以限制预定义端口集的数量，对于其他端口，您可以指定任意端口。

此外，您不能使用端口转发来打开弹性 IP 地址的端口。当使用弹性 IP 时，通过使用安全组来控制外部访问。
您还可以为转发规则指定一个 IP 协议，对于谷歌云负载平衡器，该协议始终是 TCP 或 UDP 协议

**分类:**

*   根据网络的范围或广度，转发规则可以分为内部转发规则或外部转发规则。
*   在范围的上下文中，转发规则资源还可以进一步分组为全局或区域。

**基本区别:**

<center>

| 内部转发规则 | 外部转发规则 |
| 它主要用于转发来自谷歌云网络内部的流量 | 它用于在您的 VPC 网络之外转发来自互联网的流量。 |
| 对于内部转发规则，您需要将客户端作为后端服务放在同一个虚拟专用云网络中，或者放在连接的网络中 | 对于外部转发规则，您可以让客户端全局位于 VPC 网络范围之外。 |

</center>

**内部/外部转发规则的使用:**
内部转发规则由两种类型的谷歌云负载平衡器使用:

*   **内部 TCP/UDP 负载平衡器–**
    支持的协议不是 TCP 就是 UDP，但不能同时支持两者。每个负载平衡器都至少有一个内部区域转发规则。
*   **内部 HTTP(S)负载平衡器–**
    支持的协议可以是 HTTP、HTTPS 或 HTTP/2。每个负载平衡器都有一个内部区域转发规则。

鉴于，以下谷歌云负载平衡器使用外部转发规则:

*   **外部 HTTP(S)负载平衡器–**
    它在高级层使用全球外部 IP 地址，而在标准层使用区域外部 IP 地址。
*   **SSL 代理负载平衡器–**
    这些负载平衡器类似于外部 HTTP(S)负载平衡器，因为它们可以终止 SSL (TLS)会话，但它们用于非 HTTP(S)流量。
*   **TCP 代理负载平衡器–**
    这些负载平衡器旨在用于特定端口众所周知的端口，例如用于 SMTP 的端口 25。
*   **网络负载平衡器–**
    这些不是代理负载平衡器，用于跨区域后端引导 TCP/UDP 流量。