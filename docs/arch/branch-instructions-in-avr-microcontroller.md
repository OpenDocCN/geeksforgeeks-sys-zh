# AVR 微控制器中的分支指令

> 原文:[https://www . geesforgeks . org/branch-instructions-in-AVR-microcontroller/](https://www.geeksforgeeks.org/branch-instructions-in-avr-microcontroller/)

在本文中，我们将讨论 AVR 和分支指令中的循环，包括条件指令和无条件指令。

**在 AVR 中循环:**
一个重复的操作或一组指令在编程中被称为循环。这是编写代码时非常方便的最基本的技术之一。在 AVR 中执行循环的一种方法是重复编写一组指令。

**例–**
例:

```
LDI R20, 0
LDI R21, 1
ADD R20, R21
ADD R20, R21
ADD R20, R21
ADD R20, R21
ADD R20, R21
ADD R20, R21
```

正如我们所看到的，这种执行代码的方式效率非常低，而且占用了大量的代码空间。因此，我们使用分支指令(有条件和无条件)来使循环更加简单和节省空间。

**条件转移指令:**
我们已经在[这篇文章](https://www.geeksforgeeks.org/conditional-branch-instructions-in-avr-microcontroller/)中详细讨论了条件转移指令。我们将在这里简单讨论一下。

下表显示了不同的条件分支指令及其说明。

| 指令 | 说明 | 标志状态 |
| 布雷克 | 相等时分支 | Z = 1 时的分支 |
| 布尔诺 | 不相等时分支 | Z = 0 时的分支 |
| 布朗什 | 相同或更高的分支 | C = 0 时的分支 |
| -我不知道 | 较低的分支 | C = 1 时的分支 |
| 带？带 | 小于(签名)的分支 | S = 1 时的分支 |
| 布哥 | 大于或等于(有符号)的分支 | S = 0 时的分支 |
| BRVS | 设置溢出标志时的分支 | V = 1 时的分支 |
| BRVC | 溢出标志清除时的分支 | V = 0 时的分支 |

**使用 BRNE 的循环:**
BRNE(如果不相等，则分支)指令使用状态寄存器中的 Z 标志。

**示例–**
编写一个程序，将 5 和 R20 相加 20 次，然后使用 BRNE 指令将总和发送给 PORTC。

```
       LDI R16, 20; counter register
       LDI R20, 0       
       LDI R21, 5
LOOP:  ADD R20, R21   
       DEC R16;          decrement the counter
       BRNE LOOP;        repeat until counter = 0
       OUT PORTC, R20
```

所有条件分支都是短跳转:这意味着目标的地址必须在程序计数器的 64 字节以内。

**无条件分支指令:**
无条件分支是将控制权无条件转移到目标地址的跳转。在 AVR 中，有 3 个无条件分支指令:JMP、RJMP 和 IJMP。使用哪条指令取决于目标地址。

1.  **JMP(跳远)–**
    JMP 是一个无条件的跳跃，可以跳到 AVR 的 4M(字)地址空间中的任何存储位置。它是一条 4 字节指令，其中 10 位用于操作码，其余 22 位代表目标位置的 22 位地址。
2.  **RJMP(相对跳转)–**
    在这条 2 字节指令中，前 4 位用于操作码，其余位用于目标位置的相对地址。000-$FFF 的相对地址范围分为向前和向后跳转，即相对于当前程序计数器的地址在-2048 到+2047 的内存范围内。
3.  **IJMP(间接跳转)–**
    是 2 字节指令。当它执行时，程序计数器装载了 Z 寄存器的内容，所以它跳到 Z 寄存器提供的地址。IJMP 可以在程序内存最低的 64K 字内跳转。