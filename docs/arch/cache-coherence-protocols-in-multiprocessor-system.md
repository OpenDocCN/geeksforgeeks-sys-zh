# 多处理器系统中的缓存一致性协议

> 原文:[https://www . geeksforgeeks . org/cache-coherence-protocol-in-in-multiple-system/](https://www.geeksforgeeks.org/cache-coherence-protocols-in-multiprocessor-system/)

先决条件–[高速缓冲存储器](https://www.geeksforgeeks.org/cache-memory/)
在多处理器系统中，许多进程需要同一存储块的副本，这些副本之间一致性的维护引发了一个称为**高速缓冲存储器一致性问题的问题。**
这主要是由于以下原因造成的:-

*   共享可写数据。
*   流程迁移。
*   由于输入/输出导致的不一致

**缓存一致性协议:**
解释如下:

**1。MSI 协议:**
这是一个用于多处理器系统的基本缓存一致性协议。协议名称的字母标识缓存可能处于的状态。因此，对于 MSI，每个块可以具有以下可能状态之一:

*   **已修改–**
    该块在缓存中已被修改，即缓存中的数据与后备存储(内存)不一致。因此，具有处于“M”状态的块的高速缓存在被逐出时有责任将该块写入后备存储。
*   **共享–**
    此数据块未被修改，并且存在于至少一个缓存中。缓存可以驱逐数据，而无需将其写入后备存储。
*   **无效–**
    该块无效，如果要存储在该缓存中，必须从内存或另一个缓存中提取。

**2。MOSI 协议:**
该协议是 MSI 协议的扩展。它在 MSI 协议中添加了以下状态:

*   **拥有–**
    它表示当前处理器拥有该数据块，并将为来自该数据块的其他处理器的请求提供服务。

**3。MESI 协议–**
它是使用最广泛的缓存一致性协议。每个高速缓存行都标记有以下状态之一:

*   **已修改–**
    这表示高速缓存行仅存在于当前高速缓存中，并且是脏的，即其值不同于主存储器。在允许对无效主存储器状态进行任何其他读取之前，缓存需要在将来将数据写回主存储器。
*   **Exclusive–**
    这表示高速缓存行仅存在于当前高速缓存中，并且是干净的，即其值与主存储器值匹配。
*   **Shared–**
    表示该缓存行可能存储在机器的其他缓存中。
*   **无效–**
    表示该缓存行无效。

**4。MOESI 协议:**
这是一个全缓存一致性协议，包含了其他协议中常用的所有可能状态。每个高速缓存行都处于以下状态之一:

*   **已修改–**
    处于这种状态的高速缓存行保存数据的最新正确副本，而主存储器中的副本不正确，并且没有其他处理器保存副本。
*   **拥有–**
    此状态下的缓存行保存数据的最新正确副本。它类似于共享状态，因为其他处理器可以保存最近的正确数据的副本，但是与共享状态不同，主存储器中的副本可能是不正确的。只有一个处理器可以在拥有状态下保存数据，而所有其他处理器必须在共享状态下保存数据。
*   **独占–**
    处于这种状态的高速缓存行保存数据的最新正确副本。主存副本也是最新的、正确的数据副本，而没有其他副本保存数据。
*   **共享–**
    处于这种状态的缓存行保存数据的最新正确副本。系统中的其他处理器也可以保存共享状态的数据副本。主内存副本也是数据的最新、正确的副本，如果没有其他处理器将它保存在国有状态的话。
*   **无效–**
    处于此状态的缓存行不保存有效的数据副本。数据的有效副本可以在主内存或另一个处理器缓存中。